{% extends "base.html" %}

{% block content %}
<!-- Header -->
<header class="header">
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <div class="contact-info">
                    <span><i class="fas fa-phone"></i> +57 321 882 8027</span>
                    <span><i class="fas fa-envelope"></i> order@salvajeindumentary.co</span>
                </div>
                <div class="currency-selector">
                    <select id="currency">
                        <option value="COP">$ COP</option>
                        <option value="USD">$ USD</option>
                        <option value="EUR">€ EUR</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <nav class="navbar">
        <div class="container">
            <div class="nav-wrapper">
                <div class="logo">
                    <h1><a href="{{ url_for('catalogo.index') }}" style="text-decoration: none; color: inherit;">SALVAJE</a></h1>
                    <span>Indumentary</span>
                </div>
                
                <div class="nav-links" id="navLinks">
                    <a href="#home" class="nav-link active">Inicio</a>
                    <div class="dropdown">
                        <a href="#arneses" class="nav-link">Arneses <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="#" data-category="arnes-completo">Cuerpo Completo</a>
                            <a href="#" data-category="arnes-hombre">Hombre</a>
                            <a href="#" data-category="arnes-gluteos">Glúteos y Piernas</a>
                            <a href="#" data-category="arnes-superior">Superior</a>
                        </div>
                    </div>
                    <a href="#jackets" class="nav-link">Jackets</a>
                    <a href="#lenceria" class="nav-link">Lencería</a>
                    <div class="dropdown">
                        <a href="#accesorios" class="nav-link">Accesorios <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="#" data-category="mascaras">Máscaras</a>
                            <a href="#" data-category="accesorios">Accesorios</a>
                        </div>
                    </div>
                    <a href="#nosotros" class="nav-link">Nosotros</a>
                    <a href="#fotografia" class="nav-link">Sesión Fotográfica</a>
                </div>
                
                <div class="nav-actions">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                    <a href="{{ url_for('carrito.ver_carrito') }}" class="cart-btn" title="Ver Carrito" id="cartBtnHeader">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count" id="headerCartCount">{{ cart_count or 0 }}</span>
                    </a>
                    {% if session.get('admin_logged_in') %}
                    <a href="{{ url_for('admin.panel') }}" class="admin-btn" title="Panel de Administración">
                        <i class="fas fa-user-shield"></i>
                    </a>
                    {% endif %}
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Search Bar -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar productos...">
            <button class="close-search" id="closeSearch">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
</header>

<!-- Resto del contenido del index.html original -->
<!-- Por ahora, incluiré solo las secciones principales -->
<div id="app-content">
    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-slider">
            <div class="hero-slide active">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <h2 class="hero-subtitle">Nueva Colección</h2>
                    <h1 class="hero-title">SALVAJE JACKETS</h1>
                    <p class="hero-description">Libera tu poder y sensualidad</p>
                    <a href="#products" class="btn btn-primary">Ver Colección</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products page-section active" id="products">
        <div class="container">
            <div class="products-header">
                <h2 class="section-title">Productos Destacados</h2>
                <div class="filter-controls">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="arneses">Arneses</button>
                    <button class="filter-btn" data-filter="jackets">Jackets</button>
                    <button class="filter-btn" data-filter="lenceria">Lencería</button>
                    <button class="filter-btn" data-filter="accesorios">Accesorios</button>
                    <button class="filter-btn" data-filter="sale">Sale</button>
                </div>
            </div>
            
            <div class="products-grid" id="productsGrid">
                {% for product in products %}
                {% if product.get('inStock', True) %}
                <div class="product-card" data-category="{{ product.category }}">
                    <div class="product-image">
                        <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}" loading="lazy">
                        {% if product.onSale %}
                        <div class="product-badge sale">SALE</div>
                        {% elif product.featured %}
                        <div class="product-badge">Destacado</div>
                        {% endif %}
                        <div class="product-actions">
                            <a href="{{ url_for('carrito.agregar', product_id=product.id) }}" class="action-btn add-to-cart-quick" title="Agregar al carrito" onclick="showAddToCartAnimation(event, this)">
                                <i class="fas fa-shopping-bag"></i>
                            </a>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">{{ product.category|title }}</div>
                        <h3 class="product-name">{{ product.name }}</h3>
                        <div class="product-rating">
                            {% for i in range(5) %}
                                <i class="fas fa-star{% if i >= product.rating %}-o{% endif %}"></i>
                            {% endfor %}
                        </div>
                        <div class="product-price">
                            <span class="price-current">${{ "{:,}".format(product.price) }} COP</span>
                            {% if product.originalPrice %}
                            <span class="price-original">${{ "{:,}".format(product.originalPrice) }} COP</span>
                            {% endif %}
                        </div>
                        <a href="{{ url_for('carrito.agregar', product_id=product.id) }}" class="add-to-cart-btn" onclick="showAddToCartAnimation(event, this)">
                            <i class="fas fa-shopping-bag"></i> Agregar al Carrito
                        </a>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col">
                <h3>SALVAJE Indumentary</h3>
                <p>Leather indumentary de alta calidad, diseñada para quienes se atreven a ser diferentes.</p>
            </div>
            <div class="footer-col">
                <h4>Contacto</h4>
                <ul class="contact-list">
                    <li><i class="fas fa-map-marker-alt"></i> Medellín, Colombia</li>
                    <li><i class="fas fa-phone"></i> +57 321 882 8027</li>
                    <li><i class="fas fa-envelope"></i> order@salvajeindumentary.co</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 SALVAJE Indumentary. Todos los derechos reservados.</p>
        </div>
    </div>
</footer>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/marketplace-script.js') }}"></script>
<script src="{{ url_for('static', filename='js/booking-system.js') }}"></script>
<script>
    // Pasar productos a JavaScript
    window.products = {{ products|tojson }};
    
    // Animación al agregar al carrito
    function showAddToCartAnimation(event, element) {
        // Crear elemento de animación
        const animation = document.createElement('div');
        animation.className = 'add-to-cart-animation';
        animation.innerHTML = '<i class="fas fa-check-circle"></i> ¡Agregado!';
        
        // Posicionar cerca del botón
        const rect = element.getBoundingClientRect();
        animation.style.cssText = `
            position: fixed;
            left: ${rect.left + rect.width / 2}px;
            top: ${rect.top}px;
            transform: translate(-50%, -50%);
            background: var(--accent-color);
            color: var(--primary-color);
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 10000;
            pointer-events: none;
            animation: addToCartPop 0.6s ease-out forwards;
            box-shadow: 0 4px 16px rgba(212, 175, 55, 0.4);
        `;
        
        document.body.appendChild(animation);
        
        // Remover después de la animación
        setTimeout(() => {
            animation.remove();
        }, 600);
    }
    
    // Agregar estilos de animación
    const style = document.createElement('style');
    style.textContent = `
        @keyframes addToCartPop {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -80px) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -120px) scale(0.8);
            }
        }
        
        @keyframes cartCountPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.3);
            }
        }
        
        .cart-count.updated {
            animation: cartCountPulse 0.5s ease-out;
        }
    `;
    document.head.appendChild(style);
    
    // Actualizar contador del carrito cuando se agrega un producto
    const cartCountEl = document.getElementById('headerCartCount');
    if (cartCountEl) {
        // Animar el contador cuando cambia
        const observer = new MutationObserver(() => {
            cartCountEl.classList.add('updated');
            setTimeout(() => {
                cartCountEl.classList.remove('updated');
            }, 500);
        });
        observer.observe(cartCountEl, { childList: true, characterData: true });
    }
</script>
{% endblock %}

